# FEAT-007: OM Expense è¡¨é ­-æ˜ç´°æ¶æ§‹é‡æ§‹ - é–‹ç™¼é€²åº¦

> **å»ºç«‹æ—¥æœŸ**: 2025-12-05
> **ç‹€æ…‹**: ğŸ“‹ è¨ˆåŠƒä¸­
> **æœ€å¾Œæ›´æ–°**: 2025-12-05

---

## ğŸ“Š æ•´é«”é€²åº¦

| Phase | åç¨± | ç‹€æ…‹ | é€²åº¦ | é ä¼°æ™‚é–“ |
|-------|------|------|------|---------|
| Phase 0 | è¦åŠƒæº–å‚™ | âœ… å®Œæˆ | 100% | 4h |
| Phase 1 | Schema è¨­è¨ˆèˆ‡é·ç§» | â³ å¾…é–‹å§‹ | 0% | 4-6h |
| Phase 2 | API Router é‡æ§‹ | â³ å¾…é–‹å§‹ | 0% | 8-12h |
| Phase 3 | å‰ç«¯çµ„ä»¶é–‹ç™¼ | â³ å¾…é–‹å§‹ | 0% | 12-16h |
| Phase 4 | é é¢æ”¹é€  | â³ å¾…é–‹å§‹ | 0% | 8-10h |
| Phase 5 | I18N èˆ‡å“è³ªæª¢æŸ¥ | â³ å¾…é–‹å§‹ | 0% | 2-3h |
| Phase 6 | æ•¸æ“šé·ç§»èˆ‡æ¸¬è©¦ | â³ å¾…é–‹å§‹ | 0% | 6-8h |
| Phase 7 | éƒ¨ç½²èˆ‡é©—æ”¶ | â³ å¾…é–‹å§‹ | 0% | 4-6h |
| **ç¸½è¨ˆ** | | | **6%** | **48-65h** |

**é€²åº¦åœ–ç¤º**:
```
Phase 0: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
Phase 1: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%
Phase 2: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%
Phase 3: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%
Phase 4: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%
Phase 5: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%
Phase 6: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%
Phase 7: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%
```

---

## ğŸ“‹ Phase 0: è¦åŠƒæº–å‚™ âœ…

**å®Œæˆæ—¥æœŸ**: 2025-12-05
**å¯¦éš›æ™‚é–“**: 4h

### å®Œæˆä»»å‹™

| ä»»å‹™ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| P0-01: åˆ†æç¾æœ‰æ¶æ§‹ | âœ… | æª¢æŸ¥äº† schema, API router, çµ„ä»¶, é é¢ |
| P0-02: è­˜åˆ¥å½±éŸ¿ç¯„åœ | âœ… | 25 å€‹æª”æ¡ˆå—å½±éŸ¿ |
| P0-03: å»ºç«‹æ–‡æª”ç›®éŒ„ | âœ… | FEAT-007 ç›®éŒ„å·²å»ºç«‹ |
| P0-04: æ’°å¯« 01-requirements.md | âœ… | éœ€æ±‚è¦æ ¼å®Œæˆ |
| P0-05: æ’°å¯« 02-technical-design.md | âœ… | æŠ€è¡“è¨­è¨ˆå®Œæˆ |
| P0-06: æ’°å¯« 03-implementation-plan.md | âœ… | å¯¦æ–½è¨ˆåŠƒå®Œæˆ |
| P0-07: åˆå§‹åŒ– 04-progress.md | âœ… | æœ¬æ–‡æª” |

### ç”¢å‡ºç‰©

- [x] `FEAT-007-om-expense-header-detail-refactoring/01-requirements.md`
- [x] `FEAT-007-om-expense-header-detail-refactoring/02-technical-design.md`
- [x] `FEAT-007-om-expense-header-detail-refactoring/03-implementation-plan.md`
- [x] `FEAT-007-om-expense-header-detail-refactoring/04-progress.md`

---

## ğŸ“‹ Phase 1: Schema è¨­è¨ˆèˆ‡é·ç§» â³

**é–‹å§‹æ—¥æœŸ**: -
**å®Œæˆæ—¥æœŸ**: -
**å¯¦éš›æ™‚é–“**: -

### ä»»å‹™æ¸…å–®

| ä»»å‹™ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| P1-01: æ–°å¢ OMExpenseItem æ¨¡å‹ | â³ | |
| P1-02: ä¿®æ”¹ OMExpense æ¨¡å‹ | â³ | |
| P1-03: ä¿®æ”¹ OMExpenseMonthly é—œè¯ | â³ | |
| P1-04: æ›´æ–° OperatingCompany é—œè¯ | â³ | |
| P1-05: åŸ·è¡Œ pnpm db:generate | â³ | |
| P1-06: ç·¨å¯«é·ç§»è…³æœ¬ | â³ | |
| P1-07: æœ¬åœ°æ¸¬è©¦é·ç§» | â³ | |
| P1-08: å»ºç«‹ Migration æª”æ¡ˆ | â³ | |

### æª¢æŸ¥æ¸…å–®

- [ ] `pnpm db:generate` ç„¡éŒ¯èª¤
- [ ] æœ¬åœ°è³‡æ–™åº«é·ç§»æˆåŠŸ
- [ ] ç¾æœ‰è³‡æ–™æ­£ç¢ºè½‰æ›
- [ ] æ–°èˆŠæ¬„ä½ä¸¦å­˜

---

## ğŸ“‹ Phase 2: API Router é‡æ§‹ â³

**é–‹å§‹æ—¥æœŸ**: -
**å®Œæˆæ—¥æœŸ**: -
**å¯¦éš›æ™‚é–“**: -

### ä»»å‹™æ¸…å–®

| ä»»å‹™ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| P2-01: æ›´æ–° Zod Schema | â³ | |
| P2-02: é‡æ§‹ create procedure | â³ | |
| P2-03: é‡æ§‹ update procedure | â³ | |
| P2-04: é‡æ§‹ getById procedure | â³ | |
| P2-05: é‡æ§‹ getAll procedure | â³ | |
| P2-06: æ–°å¢ addItem procedure | â³ | |
| P2-07: æ–°å¢ updateItem procedure | â³ | |
| P2-08: æ–°å¢ removeItem procedure | â³ | |
| P2-09: æ–°å¢ reorderItems procedure | â³ | |
| P2-10: é‡æ§‹ updateMonthlyRecords | â³ | |
| P2-11: é‡æ§‹ getSummary procedure | â³ | |
| P2-12: é‡æ§‹ getMonthlyTotals | â³ | |
| P2-13: API å–®å…ƒæ¸¬è©¦ | â³ | |

### æª¢æŸ¥æ¸…å–®

- [ ] æ‰€æœ‰ procedures å¯æ­£å¸¸èª¿ç”¨
- [ ] TypeScript é¡å‹æ­£ç¢º
- [ ] éŒ¯èª¤è™•ç†å®Œæ•´
- [ ] Transaction é‚è¼¯æ­£ç¢º

---

## ğŸ“‹ Phase 3: å‰ç«¯çµ„ä»¶é–‹ç™¼ â³

**é–‹å§‹æ—¥æœŸ**: -
**å®Œæˆæ—¥æœŸ**: -
**å¯¦éš›æ™‚é–“**: -

### ä»»å‹™æ¸…å–®

| ä»»å‹™ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| P3-01: æ–°å¢ OMExpenseItemForm | â³ | |
| P3-02: æ–°å¢ OMExpenseItemList | â³ | |
| P3-03: å¯¦ä½œæ‹–æ›³æ’åº | â³ | |
| P3-04: æ–°å¢ OMExpenseItemMonthlyGrid | â³ | |
| P3-05: é‡æ§‹ OMExpenseForm | â³ | |
| P3-06: é‡æ§‹ OMExpenseMonthlyGrid | â³ | |
| P3-07: é‡æ§‹ OMSummaryDetailGrid | â³ | |
| P3-08: é‡æ§‹ OMSummaryCategoryGrid | â³ | |
| P3-09: é‡æ§‹ OMSummaryFilters | â³ | |
| P3-10: æ¨£å¼å’ŒéŸ¿æ‡‰å¼è¨­è¨ˆ | â³ | |

### æª¢æŸ¥æ¸…å–®

- [ ] TypeScript ç„¡éŒ¯èª¤
- [ ] Loading/Error ç‹€æ…‹è™•ç†
- [ ] éŸ¿æ‡‰å¼è¨­è¨ˆ
- [ ] ARIA ç„¡éšœç¤™

---

## ğŸ“‹ Phase 4: é é¢æ”¹é€  â³

**é–‹å§‹æ—¥æœŸ**: -
**å®Œæˆæ—¥æœŸ**: -
**å¯¦éš›æ™‚é–“**: -

### ä»»å‹™æ¸…å–®

| ä»»å‹™ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| P4-01: é‡æ§‹ om-expenses/new | â³ | |
| P4-02: é‡æ§‹ om-expenses/[id] | â³ | |
| P4-03: é‡æ§‹ om-expenses/[id]/edit | â³ | |
| P4-04: æ›´æ–° om-expenses åˆ—è¡¨é  | â³ | |
| P4-05: æ›´æ–° om-summary | â³ | |
| P4-06: é é¢æ•´åˆæ¸¬è©¦ | â³ | |

### æª¢æŸ¥æ¸…å–®

- [ ] æ–°å¢æµç¨‹æ­£å¸¸
- [ ] ç·¨è¼¯æµç¨‹æ­£å¸¸
- [ ] è©³æƒ…é æ­£ç¢ºé¡¯ç¤º
- [ ] Summary æ•¸æ“šæ­£ç¢º

---

## ğŸ“‹ Phase 5: I18N èˆ‡å“è³ªæª¢æŸ¥ â³

**é–‹å§‹æ—¥æœŸ**: -
**å®Œæˆæ—¥æœŸ**: -
**å¯¦éš›æ™‚é–“**: -

### ä»»å‹™æ¸…å–®

| ä»»å‹™ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| P5-01: æ–°å¢ zh-TW.json éµå€¼ | â³ | |
| P5-02: æ–°å¢ en.json éµå€¼ | â³ | |
| P5-03: åŸ·è¡Œ validate:i18n | â³ | |
| P5-04: åŸ·è¡Œ typecheck | â³ | |
| P5-05: åŸ·è¡Œ lint | â³ | |
| P5-06: ä»£ç¢¼å¯©æŸ¥ | â³ | |

### æª¢æŸ¥æ¸…å–®

- [ ] I18N é©—è­‰é€šé
- [ ] TypeScript ç„¡éŒ¯èª¤
- [ ] ESLint ç„¡éŒ¯èª¤
- [ ] ä¸­è‹±æ–‡åˆ‡æ›æ­£å¸¸

---

## ğŸ“‹ Phase 6: æ•¸æ“šé·ç§»èˆ‡æ¸¬è©¦ â³

**é–‹å§‹æ—¥æœŸ**: -
**å®Œæˆæ—¥æœŸ**: -
**å¯¦éš›æ™‚é–“**: -

### ä»»å‹™æ¸…å–®

| ä»»å‹™ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| P6-01: å‚™ä»½æœ¬åœ°è³‡æ–™åº« | â³ | |
| P6-02: åŸ·è¡Œé·ç§»è…³æœ¬ | â³ | |
| P6-03: é©—è­‰é·ç§»æ•¸æ“š | â³ | |
| P6-04: æ¸¬è©¦å»ºç«‹æµç¨‹ | â³ | |
| P6-05: æ¸¬è©¦ç·¨è¼¯æµç¨‹ | â³ | |
| P6-06: æ¸¬è©¦æœˆåº¦è¨˜éŒ„ | â³ | |
| P6-07: æ¸¬è©¦ Summary | â³ | |
| P6-08: Bug ä¿®å¾© | â³ | |
| P6-09: å›æ­¸æ¸¬è©¦ | â³ | |

### æª¢æŸ¥æ¸…å–®

- [ ] å‚™ä»½å®Œæˆ
- [ ] é·ç§»ç„¡æ•¸æ“šä¸Ÿå¤±
- [ ] åŠŸèƒ½æ¸¬è©¦é€šé
- [ ] Bug å·²ä¿®å¾©

---

## ğŸ“‹ Phase 7: éƒ¨ç½²èˆ‡é©—æ”¶ â³

**é–‹å§‹æ—¥æœŸ**: -
**å®Œæˆæ—¥æœŸ**: -
**å¯¦éš›æ™‚é–“**: -

### ä»»å‹™æ¸…å–®

| ä»»å‹™ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| P7-01: å‚™ä»½ Azure è³‡æ–™åº« | â³ | |
| P7-02: éƒ¨ç½²åˆ° Azure å€‹äººç’°å¢ƒ | â³ | |
| P7-03: Azure é·ç§»åŸ·è¡Œ | â³ | |
| P7-04: Azure åŠŸèƒ½é©—è­‰ | â³ | |
| P7-05: æ›´æ–° CLAUDE.md | â³ | |
| P7-06: æ›´æ–°é€²åº¦æ–‡æª” | â³ | |
| P7-07: Git æäº¤æ¨é€ | â³ | |
| P7-08: ç”¨æˆ¶é©—æ”¶æ¸¬è©¦ | â³ | |
| P7-09: åé¥‹å’Œèª¿æ•´ | â³ | |

### æª¢æŸ¥æ¸…å–®

- [ ] Azure å‚™ä»½å®Œæˆ
- [ ] éƒ¨ç½²æˆåŠŸ
- [ ] é·ç§»æ•¸æ“šæ­£ç¢º
- [ ] UAT é€šé
- [ ] æ–‡æª”æ›´æ–°å®Œæˆ

---

## ğŸ“ é–‹ç™¼æ—¥èªŒ

### 2025-12-05 (Phase 0 - è¦åŠƒæº–å‚™)

**å®Œæˆé …ç›®**:
- å®Œæˆç¾æœ‰ OMExpense æ¶æ§‹åˆ†æ
- è­˜åˆ¥ 25 å€‹å—å½±éŸ¿çš„æª”æ¡ˆ
- å»ºç«‹ FEAT-007 æ–‡æª”ç›®éŒ„å’Œ 4 å€‹è¦åŠƒæ–‡æª”
- æ’°å¯«å®Œæ•´çš„éœ€æ±‚è¦æ ¼ã€æŠ€è¡“è¨­è¨ˆã€å¯¦æ–½è¨ˆåŠƒ

**é—œéµæ±ºç­–**:
- æ¡ç”¨è¡¨é ­-æ˜ç´°æ¶æ§‹ (OMExpense â†’ OMExpenseItem â†’ OMExpenseMonthly)
- è³‡æ–™é·ç§»ç­–ç•¥ï¼šæ¼¸é€²å¼é·ç§»ï¼Œä¿ç•™èˆŠæ¬„ä½ä¸€æ®µæ™‚é–“
- å‰ç«¯æ‹–æ›³æ’åºå»ºè­°ä½¿ç”¨ @dnd-kit

**å¾…æ±ºå®šäº‹é …** âœ… å·²å…¨éƒ¨ç¢ºèª:
1. âœ… æ˜¯å¦æ”¯æ´é …ç›®éšå±¤ï¼Ÿâ†’ **A) å–®å±¤**
2. âœ… æ‹–æ›³æ’åºå¥—ä»¶é¸æ“‡ï¼Ÿâ†’ **B) @dnd-kit**
3. âœ… èˆŠæ¬„ä½ä½•æ™‚ç§»é™¤ï¼Ÿâ†’ **B) ä¸€å€‹ç‰ˆæœ¬å¾Œ**
4. âœ… API å‘å¾Œå…¼å®¹æœŸï¼Ÿâ†’ **B) 2 é€±**

**ä¸‹ä¸€æ­¥**:
- âœ… ä¿å­˜é€²åº¦ä¸¦å‰µå»º rollback æ¨™ç±¤
- æº–å‚™é€²å…¥ Phase 1 (Schema è¨­è¨ˆèˆ‡é·ç§»)

---

## ğŸ› å•é¡Œè¿½è¹¤

| ç·¨è™Ÿ | å•é¡Œæè¿° | ç™¼ç¾æ—¥æœŸ | ç‹€æ…‹ | è§£æ±ºæ–¹æ¡ˆ | è§£æ±ºæ—¥æœŸ |
|------|---------|---------|------|---------|---------|
| - | æš«ç„¡ | - | - | - | - |

---

## âœ… æ¸¬è©¦çµæœ

### å–®å…ƒæ¸¬è©¦

| æ¸¬è©¦é …ç›® | æ¸¬è©¦æ•¸é‡ | é€šé | å¤±æ•— | è¦†è“‹ç‡ |
|---------|---------|------|------|--------|
| API Router | - | - | - | - |
| çµ„ä»¶ | - | - | - | - |

### æ‰‹å‹•æ¸¬è©¦

| æ¸¬è©¦å ´æ™¯ | æ¸¬è©¦è€… | æ—¥æœŸ | çµæœ | å‚™è¨» |
|---------|--------|------|------|------|
| - | - | - | - | - |

---

## ğŸ“š ç›¸é—œæ–‡æª”

- [01-requirements.md](./01-requirements.md) - éœ€æ±‚è¦æ ¼
- [02-technical-design.md](./02-technical-design.md) - æŠ€è¡“è¨­è¨ˆ
- [03-implementation-plan.md](./03-implementation-plan.md) - å¯¦æ–½è¨ˆåŠƒ

---

**æ–‡æª”ç‰ˆæœ¬**: 1.0
**æœ€å¾Œæ›´æ–°**: 2025-12-05
**ä½œè€…**: Claude AI Assistant
