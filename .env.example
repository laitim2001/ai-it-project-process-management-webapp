# ==============================================================================
# IT å°ˆæ¡ˆæµç¨‹ç®¡ç†å¹³å° - ç’°å¢ƒè®Šæ•¸æ¨£æ¿
# ==============================================================================
#
# ä½¿ç”¨èªªæ˜:
# 1. è¤‡è£½æ­¤æª”æ¡ˆç‚º .env: cp .env.example .env
# 2. å¡«å¯«æ‰€æœ‰æ¨™è¨˜ç‚º "REQUIRED" çš„è®Šæ•¸
# 3. "OPTIONAL" è®Šæ•¸å¯ä»¥ä¿æŒé è¨­å€¼æˆ–æ ¹æ“šéœ€æ±‚èª¿æ•´
# 4. ä¸è¦å°‡ .env æª”æ¡ˆæäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»çµ±
#
# ==============================================================================

# ------------------------------------------------------------------------------
# ç’°å¢ƒè¨­å®š (Environment Configuration)
# ------------------------------------------------------------------------------
NODE_ENV=development                    # development | staging | production
APP_NAME="IT Project Process Management Platform"
APP_URL=http://localhost:3000           # æ‡‰ç”¨ç¨‹å¼çš„åŸºç¤ URL

# ------------------------------------------------------------------------------
# è³‡æ–™åº« (Database)
# ------------------------------------------------------------------------------
# æœ¬åœ°é–‹ç™¼ç’°å¢ƒ (ä½¿ç”¨ Docker Compose)
DATABASE_URL="postgresql://postgres:localdev123@localhost:5432/itpm_dev"

# Azure é–‹ç™¼ç’°å¢ƒ (å¦‚ä½¿ç”¨ Azure Database for PostgreSQL)
# DATABASE_URL="postgresql://[username]:[password]@[server].postgres.database.azure.com:5432/[database]?sslmode=require"

# Prisma ç›¸é—œ
# SHADOW_DATABASE_URL=""                # åƒ…åœ¨ç”Ÿç”¢ç’°å¢ƒé€²è¡Œ migration æ™‚éœ€è¦

# ------------------------------------------------------------------------------
# NextAuth.js èªè­‰ (Authentication)
# ------------------------------------------------------------------------------
# REQUIRED: NextAuth å¯†é‘° (ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ç”Ÿæˆ: openssl rand -base64 32)
NEXTAUTH_SECRET="GENERATE_WITH_OPENSSL_RAND_BASE64_32"

# REQUIRED: NextAuth æ‡‰ç”¨ç¨‹å¼ URL
NEXTAUTH_URL="http://localhost:3000"

# Session è¨­å®š
NEXTAUTH_SESSION_MAX_AGE=86400          # 24 å°æ™‚ (ç§’)

# ------------------------------------------------------------------------------
# Azure AD (Entra ID) - ä¼æ¥­ç´šèº«ä»½é©—è­‰
# ------------------------------------------------------------------------------
# REQUIRED: åœ¨ Azure Portal ä¸­å‰µå»º Azure AD App Registration å¾Œç²å–
# æ³¨æ„: é€™æ˜¯ç”¨æ–¼ä¼æ¥­å…§éƒ¨å“¡å·¥çš„ SSO ç™»å…¥ï¼Œä¸æ˜¯ Azure AD B2C

# Azure AD Tenant è¨­å®š
AZURE_AD_TENANT_ID="your-tenant-id-guid"                     # Tenant ID (Directory ID)
AZURE_AD_CLIENT_ID="your-client-id-guid"                     # Application (client) ID
AZURE_AD_CLIENT_SECRET="your-client-secret"                  # Client secret value

# Azure AD API Scopes
# é è¨­ç¯„åœ: openid, profile, email, User.Read
# User.Read: å…è¨±æ‡‰ç”¨ç¨‹å¼è®€å–ç™»å…¥ç”¨æˆ¶çš„å€‹äººè³‡æ–™
AZURE_AD_SCOPE="openid profile email User.Read"

# ğŸ“ é‡è¦æç¤ºï¼š
# 1. æœ¬åœ°é–‹ç™¼ç’°å¢ƒç„¡æ³•ä½¿ç”¨ Azure AD SSOï¼ˆéœ€è¦å…¬å¸ç¶²çµ¡è¨ªå•æ¬Šé™ï¼‰
#    - æœ¬åœ°é–‹ç™¼è«‹ä½¿ç”¨ Email/Password æ†‘è­‰ç™»å…¥
#    - Azure AD SSO åƒ…åœ¨éƒ¨ç½²åˆ° Azure å¾Œå¯ç”¨
#
# 2. Azure AD App Registration é…ç½®ï¼ˆåœ¨ Azure Portal å®Œæˆï¼‰ï¼š
#    - Redirect URI: https://your-app-url.azurewebsites.net/api/auth/callback/azure-ad
#    - ä¾‹å¦‚: https://app-itpm-dev-001.azurewebsites.net/api/auth/callback/azure-ad
#    - Logout URL: https://your-app-url.azurewebsites.net/
#
# 3. éœ€è¦çš„ API æ¬Šé™ï¼ˆDelegated Permissionsï¼‰ï¼š
#    - Microsoft Graph > User.Read (å…è¨±ç™»å…¥å’Œè®€å–ç”¨æˆ¶å€‹äººè³‡æ–™)
#    - OpenID permissions (openid, profile, email)
#
# 4. ç’°å¢ƒè®Šæ•¸æª¢æŸ¥ï¼š
#    - ç•¶é€™ä¸‰å€‹è®Šæ•¸éƒ½è¨­ç½®æ™‚ï¼ŒAzure AD provider æœƒè‡ªå‹•å•Ÿç”¨
#    - ç¼ºå°‘ä»»ä½•ä¸€å€‹è®Šæ•¸æ™‚ï¼Œåƒ…ä½¿ç”¨ Email/Password æ†‘è­‰ç™»å…¥

# ------------------------------------------------------------------------------
# Azure æœå‹™ (Azure Services)
# ------------------------------------------------------------------------------

# Azure Blob Storage (æª”æ¡ˆä¸Šå‚³: å ±åƒ¹å–®ã€ç™¼ç¥¨ã€ææ¡ˆ)
# ------------------------------------------------------------------------------

# ğŸ  æœ¬åœ°é–‹ç™¼ç’°å¢ƒ (Azurite æ¨¡æ“¬å™¨) - æ¨è–¦ä½¿ç”¨
# ä½¿ç”¨ Azurite ç¢ºä¿é–‹ç™¼ç’°å¢ƒèˆ‡ç”Ÿç”¢ç’°å¢ƒä»£ç¢¼ä¸€è‡´æ€§
AZURE_STORAGE_USE_DEVELOPMENT=true

# ç•¶ AZURE_STORAGE_USE_DEVELOPMENT=true æ™‚ï¼Œæœƒè‡ªå‹•ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š
# - Connection String: UseDevelopmentStorage=true
# - Account Name: devstoreaccount1 (Azurite é è¨­)
# - Blob Service Endpoint: http://127.0.0.1:10000/devstoreaccount1
# - Queue Service Endpoint: http://127.0.0.1:10001/devstoreaccount1
# - Table Service Endpoint: http://127.0.0.1:10002/devstoreaccount1

# â˜ï¸ Azure ç”Ÿç”¢ç’°å¢ƒé…ç½® (UAT/Production)
# è¨­ç½® AZURE_STORAGE_USE_DEVELOPMENT=false ä¸¦æä¾›ä»¥ä¸‹è®Šæ•¸
# AZURE_STORAGE_USE_DEVELOPMENT=false
# AZURE_STORAGE_ACCOUNT_NAME="yourstorageaccountname"
# AZURE_STORAGE_ACCOUNT_KEY="your-storage-account-key"  # åƒ…ç”¨æ–¼ SAS Token ç”Ÿæˆ (OPTIONAL)

# ğŸ“ é‡è¦æç¤ºï¼š
# 1. æœ¬åœ°é–‹ç™¼å»ºè­°ä½¿ç”¨ Azurite (AZURE_STORAGE_USE_DEVELOPMENT=true)
#    - ç’°å¢ƒä¸€è‡´æ€§ï¼šæœ¬åœ°å’Œç”Ÿç”¢ä½¿ç”¨ç›¸åŒçš„ Azure SDK ä»£ç¢¼
#    - ç„¡éœ€ Azure å¸³è™Ÿï¼šå®Œå…¨æœ¬åœ°åŒ–é–‹ç™¼
#    - å¿«é€Ÿå•Ÿå‹•ï¼šdocker-compose up -d azurite
#
# 2. ç”Ÿç”¢ç’°å¢ƒä½¿ç”¨ Azure Blob Storage (AZURE_STORAGE_USE_DEVELOPMENT=false)
#    - ä½¿ç”¨ Managed Identity é€²è¡Œèº«ä»½é©—è­‰ï¼ˆæ¨è–¦ï¼Œç„¡éœ€ Account Keyï¼‰
#    - AZURE_STORAGE_ACCOUNT_KEY åƒ…åœ¨éœ€è¦ç”Ÿæˆ SAS Token æ™‚ä½¿ç”¨
#
# 3. Azurite ä½¿ç”¨å‰æï¼š
#    - ç¢ºä¿ Docker æœå‹™å·²å•Ÿå‹•
#    - åŸ·è¡Œ: docker-compose up -d azurite
#    - é©—è­‰: docker-compose ps azurite
#
# 4. ç’°å¢ƒåˆ‡æ›ï¼š
#    - é–‹ç™¼ç’°å¢ƒ â†’ UAT: ä¿®æ”¹ AZURE_STORAGE_USE_DEVELOPMENT=falseï¼Œè¨­ç½® ACCOUNT_NAME
#    - ç„¡éœ€ä¿®æ”¹ä»»ä½•æ‡‰ç”¨ç¨‹å¼ä»£ç¢¼ï¼Œazure-storage.ts æœƒè‡ªå‹•æª¢æ¸¬ç’°å¢ƒ

# Blob Storage Containers (é–‹ç™¼å’Œç”Ÿç”¢ç’°å¢ƒä½¿ç”¨ç›¸åŒåç¨±)
AZURE_STORAGE_CONTAINER_QUOTES="quotes"                     # å ±åƒ¹å–®å®¹å™¨
AZURE_STORAGE_CONTAINER_INVOICES="invoices"                 # ç™¼ç¥¨å®¹å™¨
AZURE_STORAGE_CONTAINER_PROPOSALS="proposals"               # ææ¡ˆæ–‡ä»¶å®¹å™¨

# Azure Key Vault (ç”Ÿç”¢ç’°å¢ƒå¯†é‘°ç®¡ç†)
# OPTIONAL: åƒ…åœ¨ç”Ÿç”¢ç’°å¢ƒä½¿ç”¨
# AZURE_KEY_VAULT_NAME="your-keyvault-name"
# AZURE_KEY_VAULT_URI="https://your-keyvault-name.vault.azure.net/"

# Azure Application Insights (ç›£æ§èˆ‡æ—¥èªŒ)
# OPTIONAL: å»ºè­°åœ¨ Staging å’Œ Production å•Ÿç”¨
# AZURE_APP_INSIGHTS_CONNECTION_STRING="InstrumentationKey=...;IngestionEndpoint=...;LiveEndpoint=..."
# AZURE_APP_INSIGHTS_INSTRUMENTATION_KEY="your-instrumentation-key"

# ------------------------------------------------------------------------------
# Email æœå‹™ (SendGrid)
# ------------------------------------------------------------------------------
# REQUIRED: ç”¨æ–¼ç™¼é€é€šçŸ¥éƒµä»¶

SENDGRID_API_KEY="your-sendgrid-api-key"
SENDGRID_FROM_EMAIL="noreply@yourdomain.com"               # ç™¼ä»¶äººåœ°å€ (éœ€é©—è­‰)
SENDGRID_FROM_NAME="IT Project Management"

# Email Templates (SendGrid Dynamic Template IDs)
# OPTIONAL: å¦‚ä½¿ç”¨ SendGrid Dynamic Templates
# SENDGRID_TEMPLATE_PROPOSAL_SUBMITTED="d-xxxxx"
# SENDGRID_TEMPLATE_PROPOSAL_APPROVED="d-xxxxx"
# SENDGRID_TEMPLATE_PROPOSAL_REJECTED="d-xxxxx"
# SENDGRID_TEMPLATE_MORE_INFO_REQUIRED="d-xxxxx"

# æœ¬åœ°é–‹ç™¼: ä½¿ç”¨ Mailhog ä»£æ›¿ SendGrid (SMTP)
# SMTP_HOST=localhost
# SMTP_PORT=1025
# SMTP_USER=""
# SMTP_PASSWORD=""

# ------------------------------------------------------------------------------
# Redis (Session & Caching)
# ------------------------------------------------------------------------------
# OPTIONAL: ç”¨æ–¼ Session å­˜å„²å’Œå¿«å–

REDIS_URL="redis://localhost:6379"                          # æœ¬åœ°é–‹ç™¼
# REDIS_URL="rediss://[password]@[hostname]:6380"           # Azure Cache for Redis

# ------------------------------------------------------------------------------
# API é€Ÿç‡é™åˆ¶ (Rate Limiting)
# ------------------------------------------------------------------------------
# OPTIONAL: ä¿è­· API å…å—æ¿«ç”¨

RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=100                                 # æ¯å€‹æ™‚é–“çª—å£çš„æœ€å¤§è«‹æ±‚æ•¸
RATE_LIMIT_WINDOW_MS=60000                                  # æ™‚é–“çª—å£ (æ¯«ç§’, 60000 = 1åˆ†é˜)

# ------------------------------------------------------------------------------
# æ—¥èªŒèˆ‡ç›£æ§ (Logging & Monitoring)
# ------------------------------------------------------------------------------

LOG_LEVEL=info                                               # error | warn | info | debug | trace
LOG_FORMAT=json                                              # json | pretty

# ------------------------------------------------------------------------------
# å‰ç«¯ç›¸é—œ (Frontend)
# ------------------------------------------------------------------------------
# Next.js Public ç’°å¢ƒè®Šæ•¸ (å¯åœ¨ç€è¦½å™¨ç«¯å­˜å–, éœ€è¦ NEXT_PUBLIC_ å‰ç¶´)

NEXT_PUBLIC_APP_NAME="${APP_NAME}"
NEXT_PUBLIC_APP_VERSION="1.0.0"
NEXT_PUBLIC_ENVIRONMENT="${NODE_ENV}"

# Feature Flags (åŠŸèƒ½é–‹é—œ)
NEXT_PUBLIC_FEATURE_AI_ASSISTANT=false                      # Epic 9: AI åŠŸèƒ½ (Post-MVP)
NEXT_PUBLIC_FEATURE_EXTERNAL_INTEGRATION=false              # Epic 10: å¤–éƒ¨æ•´åˆ (Post-MVP)

# ------------------------------------------------------------------------------
# é–‹ç™¼å·¥å…· (Development Tools)
# ------------------------------------------------------------------------------

# Prisma Studio
# PRISMA_STUDIO_PORT=5555

# èª¿è©¦æ¨¡å¼
DEBUG=false                                                  # å•Ÿç”¨è©³ç´°èª¿è©¦æ—¥èªŒ
VERBOSE_LOGGING=false

# ------------------------------------------------------------------------------
# æ¸¬è©¦ç’°å¢ƒ (Testing)
# ------------------------------------------------------------------------------
# æ¸¬è©¦è³‡æ–™åº« URL (ä½¿ç”¨ç¨ç«‹çš„æ¸¬è©¦è³‡æ–™åº«)
TEST_DATABASE_URL="postgresql://postgres:localdev123@localhost:5432/itpm_test"

# E2E æ¸¬è©¦è¨­å®š
PLAYWRIGHT_TEST_BASE_URL="http://localhost:3000"

# ------------------------------------------------------------------------------
# CI/CD (Continuous Integration/Deployment)
# ------------------------------------------------------------------------------
# é€™äº›è®Šæ•¸é€šå¸¸åœ¨ GitHub Actions æˆ– Azure DevOps ä¸­è¨­å®š

# AZURE_CREDENTIALS=""                                       # Azure Service Principal JSON
# AZURE_CONTAINER_REGISTRY=""                                # ACR åç¨±
# AZURE_WEBAPP_NAME=""                                       # App Service åç¨±

# ------------------------------------------------------------------------------
# ç¬¬ä¸‰æ–¹æ•´åˆ (Third-Party Integrations) - Future Use
# ------------------------------------------------------------------------------

# ERP ç³»çµ±æ•´åˆ (Epic 10)
# ERP_API_BASE_URL=""
# ERP_API_KEY=""

# HR ç³»çµ±æ•´åˆ (Epic 10)
# HR_API_BASE_URL=""
# HR_API_KEY=""

# ------------------------------------------------------------------------------
# å®‰å…¨æ€§ (Security)
# ------------------------------------------------------------------------------

# CORS è¨­å®š
CORS_ORIGIN="http://localhost:3000"                         # å¤šå€‹ä¾†æºç”¨é€—è™Ÿåˆ†éš”

# CSP (Content Security Policy)
# CSP_DIRECTIVES="default-src 'self'; script-src 'self' 'unsafe-inline';"

# ------------------------------------------------------------------------------
# å…¶ä»–è¨­å®š (Miscellaneous)
# ------------------------------------------------------------------------------

# æ™‚å€è¨­å®š
TZ=Asia/Taipei

# åˆ†é é è¨­å€¼
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# æª”æ¡ˆä¸Šå‚³é™åˆ¶
MAX_FILE_SIZE_MB=10                                          # å–®å€‹æª”æ¡ˆæœ€å¤§ 10MB
ALLOWED_FILE_TYPES=".pdf,.docx,.xlsx,.png,.jpg"             # å…è¨±çš„æª”æ¡ˆé¡å‹
