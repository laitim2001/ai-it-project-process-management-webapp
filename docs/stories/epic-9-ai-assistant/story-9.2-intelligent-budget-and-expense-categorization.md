# Story 9.2: 智慧化預算與費用分類

## User Story

**身為** 專案經理,
**我想要** 在我上傳發票或記錄費用時，AI 助理能自動掃描內容並建議費用類別,
**以便** 我能減少手動數據輸入的時間和潛在的分類錯誤。

## 背景說明
費用記錄是一個高頻但重複性強的任務。手動為每筆開銷選擇正確的分類不僅繁瑣，而且容易出錯，導致後續的財務報告不準確。此功能利用 AI 的文檔理解能力 (OCR + NLP) 來自動化這個過程，將專案經理從重複的數據錄入工作中解放出來，同時提高數據的結構化和一致性。

## 技術規格 (初步建議)
*   **前端:** 在費用記錄的表單中，當發票文件被上傳後，對應的「費用類別」、「金額」等欄位應被 AI 建議的數值自動填充，並以高亮或特殊樣式標記，允許使用者確認或修改。
*   **後端:**
    *   需要一個 API 端點 (e.g., `POST /api/expenses/analyze-invoice`)，接收上傳的發票文件。
    *   後端服務需要整合一個具備光學字符識別 (OCR) 和自然語言處理 (NLP) 功能的 AI 服務（如 Azure Form Recognizer, Google Document AI, 或結合 Tesseract.js 和 LLM）。
    *   服務會從發票圖片或 PDF 中提取關鍵資訊（供應商、日期、總金額、項目明細），並根據項目明細推薦一個最可能的費用類別。
*   **資料庫:** `expenses` 表的創建將利用到 AI 提取的數據。

## 驗收標準
1.  假定我正在「記錄費用」的頁面，並上傳了一張包含清晰供應商名稱、日期和總金額的發票圖片。
2.  上傳成功後，頁面上的「供應商」、「費用日期」和「金額」欄位應被自動填充。
3.  系統應根據發票內容，在「費用類別」下拉選單中預選一個最可能的選項。
4.  所有被 AI 自動填充的欄位都應允許我手動修改和確認。
5.  如果 AI 無法識別文件中的任何資訊，系統不應出錯，而是允許我手動填寫所有欄位。

## 技術債務考量
*   **暫不包含：** 處理手寫或模糊不清的發票。MVP 階段假設發票是標準的、機打的電子或掃描文件。
*   **未來考慮：** 引入更強大的 AI 模型或人工校驗流程，以處理複雜和低質量的發票。
