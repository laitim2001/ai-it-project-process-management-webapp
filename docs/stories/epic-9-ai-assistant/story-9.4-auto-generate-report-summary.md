# Story 9.4: 自動生成報告摘要

## User Story

**身為** 部門主管,
**我想要** AI 助理能自動分析指定時間範圍內的專案數據，並生成一份包含關鍵洞察的執行摘要,
**以便** 我能從繁瑣的數據整理中解放出來，快速完成向管理層的匯報。

## 背景說明
撰寫年度或季度報告是主管的一項重要但耗時的工作。他們需要從大量的原始數據中手動提取、匯總並提煉出有意義的結論。此功能將 AI 定位為一個「數據分析師助理」，自動完成大部分的數據處理和初步分析工作。使用者只需設定範圍，AI 就能交付一份結構清晰、包含核心指標和趨勢分析的報告初稿，讓主管可以基於此進行修改和深化，極大地縮短了報告的撰寫時間。

## 技術規格 (初步建議)
*   **前端:** 需要一個新的「報告生成」頁面。該頁面允許使用者選擇報告的時間範圍（如「去年」、「上個季度」）和報告類型。
*   **後端:**
    *   需要一個 API 端點 (e.g., `POST /api/reports/generate-summary`)。
    *   後端服務會根據時間範圍，從資料庫中撈取所有相關的專案、預算、費用等數據。
    *   將這些結構化數據匯總，計算出關鍵指標（KPIs）。
    *   將這些 KPIs 和數據摘要，透過一個精心設計的 prompt 傳遞給 LLM，要求其生成一段自然語言的執行摘要。
*   **輸出:** 生成的報告可以是一個包含文本和數據表格的網頁，並提供「複製到剪貼簿」或「導出為 Markdown」的功能。

## 驗收標準
1.  假定我進入「報告生成」頁面，並選擇了「上一個年度」。
2.  點擊「生成摘要」按鈕後，系統應在 30 秒內返回一份報告。
3.  報告中必須包含一個由自然語言寫成的執行摘要，其中提到了該年度的總專案數、總預算、總支出、專案成功率等關鍵資訊。
4.  報告中應包含支持摘要結論的數據表格，例如「按資金池劃分的支出分佈」。
5.  我應該能夠輕易地將生成的文本和表格複製出來，以便粘貼到 PPT 或 Word 中。

## 技術債務考量
*   **暫不包含：** 生成視覺化圖表。MVP 階段的報告以文本和表格為主。
*   **未來考慮：** 整合圖表生成函式庫（如 D3.js, Chart.js），讓 AI 能夠自動選擇並生成最適合的視覺化圖表來呈現數據。
