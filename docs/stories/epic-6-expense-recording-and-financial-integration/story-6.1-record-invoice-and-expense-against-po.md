# Story 6.1: 根據採購單記錄發票與費用

## User Story

**身為** 專案經理,
**我想要** 為一個已生成的「採購單 (Purchase Order)」上傳對應的發票 (Invoice)，並記錄一筆費用 (Expense),
**以便** 將實際支出與採購計劃關聯起來。

## 背景說明
費用記錄是財務追蹤的基礎。此功能將發票（代表供應商的請款要求）與系統中的採購單（代表已批准的採購計劃）直接關聯。這一步確保了每一筆支出都有據可依，為後續的審批和預算扣除提供了清晰的數據鏈路，取代了目前分散且手動的費用記錄方式。

## 技術規格 (初步建議)
*   **前端:**
    *   在「採購單」詳情頁面，應有一個「記錄費用/上傳發票」的按鈕。
    *   點擊後，會出現一個表單，包含文件上傳功能以及費用金額、日期等欄位。
*   **後端:**
    *   需要一個 API 端點 (e.g., `POST /api/purchase-orders/:id/expenses`) 來創建費用記錄。
    *   需要處理發票文件上傳，並將其與費用記錄關聯。
*   **資料庫:** 需要一個新的 `expenses` 表，包含 `id`, `purchase_order_id`, `invoice_file_path`, `amount`, `expense_date`, `status` 等欄位。

## 驗收標準
1.  假定我正在查看一個已生成的採購單詳情頁。
2.  我應該能找到一個「記錄費用」的操作按鈕。
3.  我應該能夠上傳一張發票文件。
4.  我必須填寫實際的費用金額和發生日期。
5.  成功創建後，這筆費用記錄（初始狀態為「待提交」）應顯示在關聯的採購單下方。
6.  一筆採購單可以對應多筆費用記錄（例如，分期付款）。

## 技術債務考量
*   **暫不包含：** 複雜的發票驗證邏輯（如檢查總金額是否超支）。MVP 階段假設使用者輸入的金額是正確的。
*   **未來考慮：** 增加系統校驗，當記錄的費用總額超過採購單金額時，向使用者發出警告。
