# Story 8.2: 實現關鍵狀態變更的自動通知

## User Story

**身為** 使用者（專案經理或主管）,
**我希望** 當我負責的項目發生需要我關注的關鍵狀態變更時，能立即收到一封電子郵件通知,
**以便** 我能及時進行下一步操作，避免流程延遲。

## 背景說明
這個故事是通知系統的應用層。在 Story 8.1 建立的基礎上，我們將在各個業務流程的關鍵節點上，實際調用郵件服務。這將把一個被動的系統轉變為一個主動的、推動使用者行動的系統。例如，當主管批准了一個提案，專案經理不應需要反覆刷新頁面才能得知，而應立即收到郵件，從而可以無縫地開始下一步的採購流程。

## 技術規格 (初步建議)
*   **後端:**
    *   需要在多個現有服務的邏輯中，注入對 `EmailService` 的調用。
    *   應採用事件驅動或異步處理的方式來發送郵件，以避免阻塞主流程（例如，批准操作應立即完成，郵件則在背景發送）。
*   **通知觸發點 (初步列表):**
    *   預算提案被提交時 -> 通知主管
    *   提案被批准/拒絕/要求更多資訊時 -> 通知專案經理
    *   費用被提交時 -> 通知主管
    *   費用被批准時 -> 通知專案經理

## 驗收標準
1.  當一個專案經理提交預算提案後，對應的主管必須能收到一封包含提案連結的電子郵件。
2.  當一個主管批准某個提案後，該提案的專案經理必須能收到一封通知郵件。
3.  當一個主管拒絕某個提案後，該提案的專案經理必須能收到一封通知郵件。
4.  當一個主管對某個提案要求更多資訊後，該提案的專案經理必須能收到一封包含主管評論的通知郵件。
5.  所有通知郵件的內容應清晰、簡明，並提供一個直接返回相關頁面的連結。

## 技術債務考量
*   **暫不包含：** 批次處理通知（例如，每日摘要）。所有通知都是即時發送的。
*   **未來考慮：** 允許使用者設定通知的頻率和偏好，以避免郵件疲勞。
